<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BlazorStaticPrerender</title>
    <meta name="description" content="Blazor WebAssembly optimisÃ©" />
    <base href="/" />
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="BlazorStaticPrerender.styles.css" rel="stylesheet" />

    <script>
        (function () {
            const developmentHostnames = ['localhost', '127.0.0.1'];
            const productionBasePath = '/BlazorStaticPrerender/';

            if (!developmentHostnames.includes(location.hostname)) {
                document.querySelector('base').href = productionBasePath;
            }
        })();
    </script>

</head>
<body>
    <!-- Static shell that renders immediately -->
    <div id="static-shell" class="shell">
        test
    </div>
    
    <!-- Hidden loading indicator -->
    <!--<div id="loading-indicator" class="loading hidden">
        <div class="spinner"></div>
        <div>Chargement de l'application...</div>
    </div>-->
    
    <!-- Blazor container (hidden initially) -->
    <div id="app" style="visibility:hidden"></div>
    
    <!-- Error UI -->
    <!--<div id="blazor-error-ui" class="hidden">
        Erreur de chargement
        <a href="." class="reload">Recharger</a>
        <span class="dismiss">ðŸ—™</span>
    </div>-->
    
    <!-- Blazor control script -->
    <script>
        let blazorLoaded = false;
        
        // Show loading when user tries to interact
        document.addEventListener('click', function(e) {
            if (!blazorLoaded) {
                e.preventDefault();
             //   document.getElementById('loading-indicator').classList.remove('hidden');
                loadBlazor();
            }
        });
             
        function loadBlazor() {
            if (blazorLoaded) return;
            blazorLoaded = true;
            
            const script = document.createElement('script');
            script.src = '_framework/blazor.webassembly.js';
            document.head.appendChild(script);
        }
        
        window.blazorReady = function () {
            //document.getElementById('loading-indicator').classList.add('hidden');
            //document.getElementById('static-shell').classList.add('hidden');
            document.getElementById('app').style.visibility = 'visible';
        };
        

        setTimeout(function() {
            if (!blazorLoaded) {
                loadBlazor();
            }
        }, 0);
    </script>
</body>
</html>